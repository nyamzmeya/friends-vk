(function(){"use strict";var e={4703:function(e,t,n){var r=n(9242),s=n(3396);function o(e,t,n,r,o,i){const a=(0,s.up)("TabMenu"),l=(0,s.up)("router-view"),d=(0,s.up)("Panel");return(0,s.wg)(),(0,s.j4)(d,{header:"Сервис анализа друзей ВК"},{default:(0,s.w5)((()=>["friend"!=e.$route.name?((0,s.wg)(),(0,s.j4)(a,{key:0,model:e.items},null,8,["model"])):(0,s.kq)("",!0),(0,s.Wm)(l)])),_:1})}var i={name:"App",data:()=>({items:[{label:"Поиск пользователей",icon:"pi pi-fw pi-search",to:"/"},{label:"Список пользователей",icon:"pi pi-fw pi-users",to:"/persons"},{label:"Построить друзей",icon:"pi pi-fw pi-sitemap",to:"/friends"}]})},a=n(89);const l=(0,a.Z)(i,[["render",o]]);var d=l;function u(e,t,n,r,o,i){const a=(0,s.up)("Search"),l=(0,s.up)("Person");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(a),i.person?((0,s.wg)(),(0,s.j4)(l,{key:0,person:i.person},null,8,["person"])):(0,s.kq)("",!0)],64)}const c={class:"search"};function p(e,t,n,r,o,i){const a=(0,s.up)("InputText"),l=(0,s.up)("Button"),d=(0,s.up)("Alert");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("div",c,[(0,s.Wm)(a,{type:"text",modelValue:e.value,"onUpdate:modelValue":t[0]||(t[0]=t=>e.value=t)},null,8,["modelValue"]),(0,s.Wm)(l,{label:"Поиск",icon:"pi pi-check",loading:this.$store.getters.ISLOADING,onClick:i.getById},null,8,["loading","onClick"])]),i.alert?((0,s.wg)(),(0,s.j4)(d,{key:0,mes:i.alert.mes,type:i.alert.type},null,8,["mes","type"])):(0,s.kq)("",!0)],64)}var m=n(7139);function f(e,t,n,r,o,i){const a=(0,s.up)("Message");return(0,s.wg)(),(0,s.j4)(a,{severity:n.type,life:2e3,sticky:!1},{default:(0,s.w5)((()=>[(0,s.Uk)((0,m.zw)(n.mes),1)])),_:1},8,["severity"])}var _={name:"Alert",props:["mes","type"],mounted(){setTimeout((()=>{this.$store.commit("SET_ALERT_SEARCH",null)}),2e3)}};const g=(0,a.Z)(_,[["render",f]]);var h=g,E={components:{Alert:h},name:"Search",data:()=>({value:null}),computed:{alert(){return this.$store.getters.ALERT_SEARCH}},methods:{getById(){this.$store.dispatch("GET_CURRENTPERSON",this.value)}}};const v=(0,a.Z)(E,[["render",p]]);var S=v;const R=["src"],w={class:"person_info"},T={class:"name"};function D(e,t,n,r,o,i){const a=(0,s.up)("Button"),l=(0,s.up)("Card");return(0,s.wg)(),(0,s.j4)(l,{class:"person"},{header:(0,s.w5)((()=>[(0,s._)("img",{alt:"user header",src:n.person.photo_200_orig,class:"photo"},null,8,R)])),content:(0,s.w5)((()=>[(0,s._)("div",w,[(0,s._)("div",T,(0,m.zw)(n.person.last_name)+" "+(0,m.zw)(n.person.first_name),1),(0,s.Wm)(a,{icon:"pi pi-check",label:"Добавить",class:"p-button-sm",onClick:t[0]||(t[0]=e=>i.addPerson(n.person)),loading:this.$store.getters.ADDISLOADING,disabled:i.added},null,8,["loading","disabled"]),(0,s.Wm)(a,{class:"p-button-sm p-button-secondary",icon:"pi pi-trash",label:"Удалить",disabled:i.deleteDis,onClick:t[1]||(t[1]=e=>i.deletePerson(n.person))},null,8,["disabled"])])])),_:1})}var N={name:"Person",props:["person","deleteDisable"],computed:{added(){return this.person.added},deleteDis(){return this.deleteDisable?this.deleteDisable:!this.added}},methods:{addPerson(e){this.$store.dispatch("ADD_PERSON_TO_LIST",e),this.$store.commit("SET_CURRENTPERSON",null),this.$store.commit("SET_ALERT_SEARCH",{mes:"Пользователь добавлен в список!",type:"success"}),setTimeout((()=>this.$store.commit("SET_ALERT_SEARCH",null)),2e3)},deletePerson(e){this.$store.commit("DELETE_PERSON",e)}},data:()=>({})};const y=(0,a.Z)(N,[["render",D]]);var b=y,P={name:"Home",computed:{person(){return this.$store.getters.CURRENTPERSON}},components:{Search:S,Person:b}};const O=(0,a.Z)(P,[["render",u]]);var k=O;const A={class:"persons"};function C(e,t,n,r,o,i){const a=(0,s.up)("Person"),l=(0,s.up)("Alert");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("div",A,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(i.persons,(e=>((0,s.wg)(),(0,s.iD)("div",{key:e.id},[(0,s.Wm)(a,{person:e},null,8,["person"])])))),128))]),i.alert?((0,s.wg)(),(0,s.j4)(l,{key:0,mes:i.alert.mes,type:i.alert.type},null,8,["mes","type"])):(0,s.kq)("",!0)],64)}var I={components:{Alert:h,Person:b},name:"Persons",computed:{persons(){return this.$store.getters.PERSONS},alert(){return this.$store.getters.ALERT_PERSONS}}};const L=(0,a.Z)(I,[["render",C]]);var F=L;const $={key:0,class:"card"},U=["onClick"],j={class:"content"},Z=["src"],H={class:"name"},G=(0,s.Uk)(" Пол: "),x={key:0},M=(0,s.Uk)(" Возраст: "),W={key:1},z=(0,s.Uk)(" Всего друзей: "),q={class:"pi pi-users mr-4 p-text-secondary",style:{"font-size":"2rem"}};function Y(e,t,n,r,o,i){const a=(0,s.up)("Tag"),l=(0,s.up)("Person"),d=(0,s.up)("DataView"),u=(0,s.up)("Alert"),c=(0,s.Q2)("badge"),p=(0,s.Q2)("tooltip");return 0!=i.friends.length?((0,s.wg)(),(0,s.iD)("div",$,[(0,s.Wm)(d,{onPage:i.changePage,value:i.friends,paginator:!0,layout:"grid",rows:4},(0,s.Nv)({grid:(0,s.w5)((({data:e})=>[this.friends_props?((0,s.wg)(),(0,s.j4)(l,{key:1,class:"card_item",person:e,style:{cursor:"no-ponter"},deleteDisable:n.deleteDisable},null,8,["person","deleteDisable"])):((0,s.wg)(),(0,s.iD)("div",{key:0,class:"card_item",onClick:t=>i.goToFriendInfo(e)},[(0,s._)("div",{class:"card_content",style:(0,m.j5)([{backgroundColor:`rgba(233, 233, 255, ${e.friend_of.length/i.all_persons})`},{width:"250px"}])},[(0,s._)("div",j,[(0,s._)("img",{src:e.photo_200_orig},null,8,Z),(0,s._)("div",H,(0,m.zw)(e.last_name)+" "+(0,m.zw)(e.first_name),1),(0,s._)("div",null,[G,(0,s.Wm)(a,null,{default:(0,s.w5)((()=>[(0,s.Uk)((0,m.zw)(1==e.sex?"Ж":2==e.sex?"М":"Пол не указан"),1)])),_:2},1024)]),e.age?((0,s.wg)(),(0,s.iD)("div",x,[M,(0,s.Wm)(a,null,{default:(0,s.w5)((()=>[(0,s.Uk)((0,m.zw)(e.age),1)])),_:2},1024)])):(0,s.kq)("",!0),e.friendsNum?((0,s.wg)(),(0,s.iD)("div",W,[z,(0,s.Wm)(a,null,{default:(0,s.w5)((()=>[(0,s.Uk)((0,m.zw)(e.friendsNum),1)])),_:2},1024)])):(0,s.kq)("",!0),(0,s._)("div",null,[(0,s.wy)((0,s._)("i",q,null,512),[[c,e.friend_of.length],[p,e.friend_of.map((e=>e.first_name+" "+e.last_name)).join("\n"),void 0,{bottom:!0}]])])])],4)],8,U))])),_:2},[this.name?{name:"header",fn:(0,s.w5)((()=>[(0,s.Uk)(" Друзья "+(0,m.zw)(this.name),1)]))}:void 0]),1032,["onPage","value"])])):((0,s.wg)(),(0,s.j4)(u,{key:1,mes:"Пока друзей нет! Добавьте сначала пользователей"}))}var B={components:{Alert:h,Person:b},name:"Friends",props:["friends_props","name","deleteDisable"],mounted(){this.friends_props||0!=this.$store.getters.FRIENDS.length&&this.$store.dispatch("FETCH_FRIENDS_NUM",[0,4])},computed:{friends(){return this.friends_props||this.$store.getters.FRIENDS},all_persons(){return this.$store.getters.PERSONS.length}},methods:{changePage(e){console.log(e),this.$store.dispatch("FETCH_FRIENDS_NUM",[e.first,4])},goToFriendInfo(e){this.$router.push({path:`/friend/${e.id}`}),this.$store.commit("SET_CURRENTFRIEND",e)}}};const V=(0,a.Z)(B,[["render",Y]]);var Q=V;function K(e,t,n,r,o,i){const a=(0,s.up)("Friends"),l=(0,s.up)("Posts");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(a,{friends_props:i.friends,name:i.name,deleteDisable:!0},null,8,["friends_props","name"]),(0,s.Wm)(l,{posts:i.posts,name:i.name},null,8,["posts","name"])],64)}n(6699);const J=(0,s.Uk)("У пользователя нет постов");function X(e,t,n,r,o,i){const a=(0,s.up)("Panel"),l=(0,s.up)("DataView"),d=(0,s.up)("Message");return n.posts&&0!=n.posts.map((e=>e.text)).length?((0,s.wg)(),(0,s.j4)(l,{key:0,value:n.posts,layout:"list",class:"posts"},{header:(0,s.w5)((()=>[(0,s.Uk)("Посты "+(0,m.zw)(n.name),1)])),list:(0,s.w5)((({data:e})=>[e.text?((0,s.wg)(),(0,s.j4)(a,{key:0,header:e.date},{default:(0,s.w5)((()=>[(0,s.Uk)((0,m.zw)(e.text),1)])),_:2},1032,["header"])):(0,s.kq)("",!0)])),_:1},8,["value"])):((0,s.wg)(),(0,s.j4)(d,{key:1},{default:(0,s.w5)((()=>[J])),_:1}))}var ee={name:"Posts",props:["posts","name"]};const te=(0,a.Z)(ee,[["render",X]]);var ne=te,re={name:"FriendInfo",components:{Friends:Q,Posts:ne},mounted(){this.$store.dispatch("GET_POSTS",this.$route.params.id)},computed:{friends(){let e=this.$store.getters.FRIENDS.filter((e=>e.id==this.$route.params.id)),t=this.$store.getters.PERSONS.filter((t=>e[0].friend_of.map((e=>e.id)).includes(t.id)));return t},posts(){return this.$store.getters.POSTS},name(){return this.$store.getters.CURRENTFRIEND.last_name+" "+this.$store.getters.CURRENTFRIEND.first_name}},data:()=>({items:[{label:"Друзья",icon:"pi pi-fw pi-search",to:"/friend/:id"}]})};const se=(0,a.Z)(re,[["render",K]]);var oe=se,ie=n(7535),ae=n(65);let le="208f0469208f0469208f04697d20f3a7fe2208f208f0469420d51770ede3e5d2ec735ce",de={async getUserFriends(e){try{let t=await(0,ie.R)(`https://api.vk.com/method/friends.get?user_id=${e}&order=name&fields=photo_200_orig,sex,bdate&access_token=${le}&v=5.131`);return t}catch(t){console.log(t)}},async getNumFriends(e){try{let t=await(0,ie.R)(`https://api.vk.com/method/friends.get?user_id=${e}&access_token=${le}&v=5.131`);return t.response.count}catch(t){console.log(t)}},async getPosts(e){try{let t=await(0,ie.R)(`https://api.vk.com/method/wall.get?owner_id=${e}&filter=owner&access_token=${le}&v=5.131`);return t.response.items}catch(t){console.log(t)}},async getCurrentPerson(e){try{let t=await(0,ie.R)(`https://api.vk.com/method/users.get?user_id=${e}&fields=photo_200_orig&access_token=${le}&v=5.131`);return t}catch(t){console.log(t)}}};var ue=de;function ce(e){if(e.length<9)return null;let t=new Date,n=new Date(e.substring(e.length-4)),r=t.getFullYear()-n.getFullYear();return r}function pe(e){let t=new Date(1e3*e);return t.getFullYear()+"."+t.getMonth()+"."+t.getDate()}var me=(0,ae.MT)({state:{currentPerson:null,persons:[],friends:[],isLoading:!1,alert_persons:{mes:"Добавленных пользователей пока нет!",type:"warn"},alert_search:null,currentFriend:null,friend_posts:null,addIsLoading:!1},getters:{CURRENTPERSON:e=>e.currentPerson,PERSONS:e=>e.persons,ISLOADING:e=>e.isLoading,ADDISLOADING:e=>e.addIsLoading,ALERT_SEARCH:e=>e.alert_search,ALERT_PERSONS:e=>e.alert_persons,FRIENDS:e=>e.friends,POSTS:e=>e.friend_posts,CURRENTFRIEND:e=>e.currentFriend},mutations:{SET_CURRENTPERSON:(e,t)=>{e.currentPerson=t},ADD_PERSON:(e,t)=>{t.added=!0,e.persons.push(t),e.alert_persons=null},SET_LOADING:(e,t)=>{e.isLoading=t},SET_ADD_LOADING:(e,t)=>{e.addIsLoading=t},SET_ALERT_SEARCH:(e,t)=>{e.alert_search=t},SET_ALERT_PERSONS:(e,t)=>{e.alert_persons=t},DELETE_PERSON:(e,t)=>{e.currentPerson==t&&(e.currentPerson=null),e.persons=e.persons.filter((e=>e.id!=t.id)),e.friends=e.friends.filter((e=>1!=e.friend_of.length||e.friend_of[0].id!=t.id));for(let n=0;n<e.friends.length;n++)e.friends[n].friend_of.map((e=>e.id)).includes(t.id)&&(1==e.friends[n].friend_of.length?e.friends.splice(n,1):e.friends[n].friend_of=e.friends[n].friend_of.filter((e=>e.id!=t.id)));e.alert_persons={mes:"Пользователь удален из списка!",type:"success"},e.alert_search=null},ADD_FRIENDS:(e,t)=>{t[0].forEach((n=>{let r=e.friends.findIndex((e=>e.id==n.id));-1!=r?e.friends[r].friend_of.push(t[1]):(n.friend_of=[],n.friend_of.push(t[1]),e.friends.push(n))})),e.friends=e.friends.sort(((e,t)=>e.last_name.localeCompare(t.last_name)))},ADD_FRIENS_NUM:(e,t)=>{for(let n=0;n<=t[1].length-1;n++)e.friends[t[0]+n].friendsNum=t[1][n],e.friends[t[0]+n].age=e.friends[t[0]+n].bdate?ce(e.friends[t[0]+n].bdate):null},SET_CURRENTFRIEND:(e,t)=>{e.currentFriend=t},ADD_FRIEND_POSTS:(e,t)=>{e.friend_posts=t}},actions:{GET_CURRENTPERSON:async(e,t)=>{e.commit("SET_LOADING",!0);let n=await ue.getCurrentPerson(t);return 0==n.response.length?(e.commit("SET_ALERT_SEARCH",{mes:"Упс! Кажется пользователя с таким id не существует",type:"warn"}),e.commit("SET_CURRENTPERSON",null),void e.commit("SET_LOADING",!1)):"deleted"==n.response[0].deactivated||"banned"==n.response[0].deactivated?(e.commit("SET_ALERT_SEARCH",{mes:"Упс! Кажется пользователь с таким id удален или забанен",type:"warn"}),e.commit("SET_CURRENTPERSON",null),void e.commit("SET_LOADING",!1)):n.response[0].is_closed?(e.commit("SET_ALERT_SEARCH",{mes:"Упс! Кажется профиль пользователя закрыт и мы не сможем добавить его друзей",type:"warn"}),e.commit("SET_CURRENTPERSON",null),void e.commit("SET_LOADING",!1)):e.state.persons.map((e=>e.id)).includes(n.response[0].id)?(e.commit("SET_ALERT_SEARCH",{mes:"Пользователь с таким id уже добавлен!",type:"warn"}),e.commit("SET_CURRENTPERSON",null),void e.commit("SET_LOADING",!1)):(e.commit("SET_ALERT_SEARCH",null),e.commit("SET_CURRENTPERSON",n.response[0]),void e.commit("SET_LOADING",!1))},ADD_PERSON_TO_LIST:async(e,t)=>{e.commit("ADD_PERSON",t),e.commit("SET_ADD_LOADING",!0);let n=await ue.getUserFriends(t.id);0!=n.response.items.length&&(n.response.items=n.response.items.filter((e=>!e.deactivated)),e.commit("ADD_FRIENDS",[n.response.items,{first_name:t.first_name,last_name:t.last_name,id:t.id}])),e.commit("SET_ADD_LOADING",!1)},FETCH_FRIENDS_NUM:async(e,t)=>{let n=await Promise.all(e.state.friends.slice(t[0],t[0]+t[1]).map((async e=>await ue.getNumFriends(e.id))));e.commit("ADD_FRIENS_NUM",[t[0],n])},GET_POSTS:async(e,t)=>{let n=await ue.getPosts(t);n=n?n.map((e=>(e.date=pe(e.date),e))):null,e.commit("ADD_FRIEND_POSTS",n)}},modules:{}});async function fe(){const e=await n.e(461).then(n.t.bind(n,3657,23));e.load({google:{families:["Roboto:100,300,400,500,700,900&display=swap"]}})}var _e=n(7729),ge=n(6709),he=n(606),Ee=n(1826),ve=n(5160),Se=n(375),Re=n(1349),we=n(3717),Te=n(9203),De=n(3235),Ne=n(9947),ye=n(1606),be=n(6171),Pe=n(3585),Oe=n(8552),ke=n(678);fe();const Ae=(0,r.ri)(d);Ae.use(me),window.store=me,Ae.use(_e.Z),Ae.component("InputText",ge.Z),Ae.component("Card",he.Z),Ae.component("Button",Ee.Z),Ae.component("Message",ve.Z),Ae.component("TabMenu",Se.Z),Ae.component("DataView",Re.Z),Ae.component("Badge",ye.Z),Ae.component("Column",we.Z),Ae.component("Tag",Te.Z),Ae.component("Row",De.Z),Ae.component("Panel",Oe.Z),Ae.component("Dropdown",Ne.Z),Ae.directive("badge",be.Z),Ae.directive("tooltip",Pe.Z);const Ce=[{path:"/",component:k},{path:"/persons",component:F},{path:"/friends",component:Q},{path:"/friend/:id",name:"friend",component:oe}],Ie=(0,ke.p7)({history:(0,ke.r5)(),routes:Ce});Ae.use(Ie),Ae.mount("#app")}},t={};function n(r){var s=t[r];if(void 0!==s)return s.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}n.m=e,function(){var e=[];n.O=function(t,r,s,o){if(!r){var i=1/0;for(u=0;u<e.length;u++){r=e[u][0],s=e[u][1],o=e[u][2];for(var a=!0,l=0;l<r.length;l++)(!1&o||i>=o)&&Object.keys(n.O).every((function(e){return n.O[e](r[l])}))?r.splice(l--,1):(a=!1,o<i&&(i=o));if(a){e.splice(u--,1);var d=s();void 0!==d&&(t=d)}}return t}o=o||0;for(var u=e.length;u>0&&e[u-1][2]>o;u--)e[u]=e[u-1];e[u]=[r,s,o]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};n.t=function(r,s){if(1&s&&(r=this(r)),8&s)return r;if("object"===typeof r&&r){if(4&s&&r.__esModule)return r;if(16&s&&"function"===typeof r.then)return r}var o=Object.create(null);n.r(o);var i={};e=e||[null,t({}),t([]),t(t)];for(var a=2&s&&r;"object"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach((function(e){i[e]=function(){return r[e]}}));return i["default"]=function(){return r},n.d(o,i),o}}(),function(){n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,r){return n.f[r](e,t),t}),[]))}}(),function(){n.u=function(e){return"js/webfontloader.3067ba56.js"}}(),function(){n.miniCssF=function(e){}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="vk-friends-test:";n.l=function(r,s,o,i){if(e[r])e[r].push(s);else{var a,l;if(void 0!==o)for(var d=document.getElementsByTagName("script"),u=0;u<d.length;u++){var c=d[u];if(c.getAttribute("src")==r||c.getAttribute("data-webpack")==t+o){a=c;break}}a||(l=!0,a=document.createElement("script"),a.charset="utf-8",a.timeout=120,n.nc&&a.setAttribute("nonce",n.nc),a.setAttribute("data-webpack",t+o),a.src=r),e[r]=[s];var p=function(t,n){a.onerror=a.onload=null,clearTimeout(m);var s=e[r];if(delete e[r],a.parentNode&&a.parentNode.removeChild(a),s&&s.forEach((function(e){return e(n)})),t)return t(n)},m=setTimeout(p.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=p.bind(null,a.onerror),a.onload=p.bind(null,a.onload),l&&document.head.appendChild(a)}}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){n.p="/friends-vk/"}(),function(){var e={143:0};n.f.j=function(t,r){var s=n.o(e,t)?e[t]:void 0;if(0!==s)if(s)r.push(s[2]);else{var o=new Promise((function(n,r){s=e[t]=[n,r]}));r.push(s[2]=o);var i=n.p+n.u(t),a=new Error,l=function(r){if(n.o(e,t)&&(s=e[t],0!==s&&(e[t]=void 0),s)){var o=r&&("load"===r.type?"missing":r.type),i=r&&r.target&&r.target.src;a.message="Loading chunk "+t+" failed.\n("+o+": "+i+")",a.name="ChunkLoadError",a.type=o,a.request=i,s[1](a)}};n.l(i,l,"chunk-"+t,t)}},n.O.j=function(t){return 0===e[t]};var t=function(t,r){var s,o,i=r[0],a=r[1],l=r[2],d=0;if(i.some((function(t){return 0!==e[t]}))){for(s in a)n.o(a,s)&&(n.m[s]=a[s]);if(l)var u=l(n)}for(t&&t(r);d<i.length;d++)o=i[d],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return n.O(u)},r=self["webpackChunkvk_friends_test"]=self["webpackChunkvk_friends_test"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=n.O(void 0,[998],(function(){return n(4703)}));r=n.O(r)})();
//# sourceMappingURL=app.24d3389c.js.map